this.barcodelib={window:this,mkbarcode:function(t){var e,n;return e=null!=t.createCanvas?t.createCanvas():this.window.document.createElement("canvas"),n=t,e.drawcode=function(e){var o,i,h,r,c,l,A,d,u,s,a,C,f,w,B,b,g,p,y,D,N,R,k,E,_,O;if("string"==typeof e)t={code:e};else{t={};for(g in e)y=e[g],t[g]=y}for(g in n)y=n[g],null==t[g]&&(t[g]=y),null==t[g]&&(t[g]=y);if(this.white=null!=t.background?t.background:null!=this.white?this.white:"#ffffff",this.black=null!=t.foreground?t.foreground:null!=this.black?this.black:"#000000",this.color="#ff00ff",i={w:[3,2,2,1,1,1,1,1,1,3],x:[2,2,1,4,1,2,1,3,2,1],y:[1,2,2,1,3,3,1,1,1,1],z:[1,1,2,1,2,1,4,2,3,2]},C=["A","A","A","A","C","C","C","C"],a=[["A","A","A","A","A","A","A","A","A","A"],["A","A","A","A","B","B","B","B","B","B"],["A","B","B","B","A","B","B","A","A","B"],["A","A","B","B","A","A","B","B","B","A"],["A","B","A","B","B","A","A","A","B","B"],["A","B","B","A","B","B","A","B","A","A"],["C","C","C","C","C","C","C","C","C","C"],["C","C","C","C","C","C","C","C","C","C"],["C","C","C","C","C","C","C","C","C","C"],["C","C","C","C","C","C","C","C","C","C"],["C","C","C","C","C","C","C","C","C","C"],["C","C","C","C","C","C","C","C","C","C"]],u=[["A","A","B","B"],["A","B","A","B"]],s=[["B","B","B","B","A","A","A","A","A","A"],["B","A","A","A","B","A","A","B","B","A"],["A","B","A","A","B","B","A","A","A","B"],["A","A","B","A","A","B","B","B","A","A"],["A","A","A","B","A","A","B","A","B","B"]],d={A:function(t){return function(e){return function(n,o){return void 0===o&&(o=0),n({width:i.w[e],color:t.white,height:o,number:e}),n({width:i.x[e],color:t.black,height:o}),n({width:i.y[e],color:t.white,height:o}),n({width:i.z[e],color:t.black,height:o})}}}(this),B:function(t){return function(e){return function(n,o){return void 0===o&&(o=0),n({width:i.z[e],color:t.white,height:o,number:e}),n({width:i.y[e],color:t.black,height:o}),n({width:i.x[e],color:t.white,height:o}),n({width:i.w[e],color:t.black,height:o})}}}(this),C:function(t){return function(e){return function(n,o){return void 0===o&&(o=0),n({width:i.w[e],color:t.black,height:o,number:e}),n({width:i.x[e],color:t.white,height:o}),n({width:i.y[e],color:t.black,height:o}),n({width:i.z[e],color:t.white,height:o})}}}(this),NORMAL_GUARD:function(t){return function(e){return e({width:1,color:t.black,height:1}),e({width:1,color:t.white,height:1}),e({width:1,color:t.black,height:1})}}(this),CENTER_GUARD:function(t){return function(e){return e({width:1,color:t.white,height:1}),e({width:1,color:t.black,height:1}),e({width:1,color:t.white,height:1}),e({width:1,color:t.black,height:1}),e({width:1,color:t.white,height:1})}}(this),EAN_18_SEP:function(t){return function(e){return e({width:7,color:t.white,height:1})}}(this),ADDON_GUARD:function(t){return function(e){return e({width:1,color:t.black,height:2}),e({width:1,color:t.white,height:2}),e({width:2,color:t.black,height:2})}}(this),ADDON_DELINEATOR:function(t){return function(e){return e({width:1,color:t.white,height:2}),e({width:1,color:t.black,height:2})}}(this),NONE:function(){return function(t){return function(e){return e({width:7,none:!0,number:t})}}}(this)},null==t.type&&(t.type="ean"),"ean"===t.type&&t.code.length<=8&&(t.type="ean8"),"ean"===t.type&&t.code.length<=13&&(t.type="ean13"),"ean"===t.type&&t.code.length<=15&&(t.type="ean15"),"ean"===t.type&&(t.type="ean18"),"ean8"===t.type&&(t.code="00000000".substr(0,8-t.code.length)+t.code),"ean13"===t.type&&(t.code="0000000000000".substr(0,13-t.code.length)+t.code),"ean15"===t.type&&(t.code="000000000000000".substr(0,15-t.code.length)+t.code),"ean18"===t.type&&(t.code="000000000000000000".substr(0,18-t.code.length)+t.code),"ean8"===t.type&&t.code.length>8&&(t.code=t.code.substr(0,8)),"ean13"===t.type&&t.code.length>13&&(t.code=t.code.substr(0,13)),"ean15"===t.type&&t.code.length>15&&(t.code=t.code.substr(0,15)),"ean18"===t.type&&t.code.length>18&&(t.code=t.code.substr(0,18)),("ean13"===t.type||"ean15"===t.type||"ean18"===t.type)&&t.replacekey){for(g=0,b=D=0;11>=D;b=++D)g+=parseInt(t.code.substr(b,1))*(1+2*(b%2));g=(10-g%10)%10,t.code=t.code.substr(0,12)+g+t.code.substr(13)}if(c=t.code.length,f=8*(c>13?13:c),B=7*c+3*(c>13)*(c-13+1)+25,w=f+13,this.width=B,this.height=w,l=this.getContext("2d"),l.fillStyle=null!=t.color&&t.color?this.color:this.white,l.fillRect(0,0,B,w),p=7,A=function(t){return function(e){var n,o;return null!=e.none&&e.none||(l.fillStyle=e.color,o=5,0===e.height?n=f-o*(1-e.height):1===e.height?n=f:2===e.height&&(o=5+f/2,n=f-o),l.fillRect(p,o,e.width,n)),null!=e.number&&(l.font="bold 10px Trebuchet MS, sans-serif",l.fillStyle=t.black,l.textAlign="center",l.textBaseline="middle",null!=l.fillText&&l.fillText(e.number,p+4,f+6)),p+=e.width}}(this),"ean8"===t.type){for(d.NORMAL_GUARD(A),b=N=0,O=t.code.length-1;O>=0?O>=N:N>=O;b=O>=0?++N:--N)r=parseInt(t.code.substr(b,1)),d[C[b]](r)(A),3===b&&d.CENTER_GUARD(A);d.NORMAL_GUARD(A)}else{for(h=parseInt(t.code.substr(0,1)),d.NONE(h)(A),d.NORMAL_GUARD(A),b=R=1;12>=R;b=++R)r=parseInt(t.code.substr(b,1)),d[a[b-1][h]](r)(A),6===b&&d.CENTER_GUARD(A);if(d.NORMAL_GUARD(A),"ean15"===t.type)for(o=parseInt(t.code.substr(13,2)),o%=4,d.EAN_18_SEP(A),b=k=0;1>=k;b=++k)0===b?d.ADDON_GUARD(A):d.ADDON_DELINEATOR(A),r=parseInt(t.code.substr(b+13,1)),d[u[b][o]](r)(A,2);if("ean18"===t.type){for(o=0,b=E=0;4>=E;b=++E)o+=3*parseInt(t.code.substr(13+b,1))*(1+2*(b%2));for(o%=10,d.EAN_18_SEP(A),b=_=0;4>=_;b=++_)0===b?d.ADDON_GUARD(A):d.ADDON_DELINEATOR(A),r=parseInt(t.code.substr(b+13,1)),d[s[b][o]](r)(A,2)}}return this.title=t.code,this},e.drawcode(t),e},addbarcode:function(t,e){var n,o,i,h,r,c,l,A;for(A=t(".barcode"),c=0,l=A.length;l>c;c++){o=A[c],n=t(o),n.html(""),i={};for(h in e)r=e[h],i[h]=r;i.code=n.attr("barcode"),n.append(this.mkbarcode(i))}}};
/*
//@ sourceMappingURL=barcodelib.js.map
*/
